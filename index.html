<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>3D Skills Graph</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    html, body { height:100%; margin:0; background:#040414; }
    #3d-graph { width:100vw; height:100vh; display:block; }
  </style>
</head>
<body>
<div id="3d-graph"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/3d-force-graph@1.77.0/dist/3d-force-graph.min.js"></script>

<script>
/* ==================== SETTINGS YOU CAN CHANGE ==================== */

// How far the camera starts from the graph (big number = zoomed out)
const START_CAMERA_Z = 900;

// How close camera will zoom after 3 seconds
const ZOOM_IN_Z = 500;

// How long zoom takes in milliseconds (1000 = 1 second)
const ZOOM_DURATION = 3000;

// How fast the graph rotates automatically
const ROTATE_SPEED = 0.0001;

// How long to wait after user stops interacting before resuming rotation
const ROTATION_RESUME_DELAY = 2000;

/* ==================== SKILLS TO SHOW ==================== */
const skills = [
  // --- O2C / Cash Application ---
  "Cash Application", "Invoice Processing", "Bank Reconciliation", "Accounts Receivable", 
  "ACH Processing", "Wire Payment Processing", "Check Processing", "NSF Handling", 
  "Remittance Matching", "Customer Communication", "Payment Reconciliation", 
  "Credit Management", "Debit/Credit Notes", "Invoice Distribution", "Collections",
  "Customer Queries Handling", "AR Aging Report", "Payment Dispute Resolution", 
  "Bank Statement Analysis", "Service Charge Management", "Write-Offs Management", 
  "Vendor Coordination", "Internal Reporting", "US Foods TANDEM System", 
  "Versapay Platform", "Micro Dynamics ERP", "C MOD Software", "ISR Tool", 
  "Open Scan Research Tool", "Quadient Impress", "AR SharePoint Management", 
  "Validation File Handling", "My Account Platform Management", "ACH Auto Deduct Coordination",

  // --- ICMAI / Accounting & Finance ---
  "Financial Accounting", "Cost Accounting", "Direct Taxation", "Indirect Taxation", 
  "GST Compliance", "TDS Compliance", "Income Tax Calculation", "Payroll Accounting", 
  "Balance Sheet Preparation", "Profit & Loss Statement", "Trial Balance", 
  "General Ledger Management", "Journal Entries", "Bank Reconciliation Statement", 
  "Financial Analysis", "Variance Analysis", "Budgeting", "Forecasting", 
  "Cost Allocation", "Material Ledger", "Stock Ledger", "Inventory Accounting", 
  "Fixed Assets Accounting", "Depreciation Accounting", "Payroll Processing", 
  "Accounting Principles", "Accounting Software Tally ERP", "SAP FICO Basics", 
  "Accounting Ratios", "KPI Reporting", "MIS Reporting", "Financial Modelling", 
  "Audit Compliance", "Internal Audit Support", "Regulatory Reporting", "SOX Compliance",

  // --- Professional Skills ---
  "Email Communication", "Professional Etiquette", "Report Writing", "Documentation Management", 
  "Data Entry Accuracy", "Attention to Detail", "Organizational Skills", "Time Management", 
  "Multitasking", "Prioritization", "Deadline Management", "Internal Coordination", 
  "Team Collaboration", "Stakeholder Communication", "Vendor Communication", 
  "Client Communication", "Meeting Coordination", "Workforce Management", 
  "Task Scheduling", "Performance Tracking", "Presentation Skills", "Decision Making",
  "Problem Solving", "Analytical Thinking", "Critical Thinking", "Logical Reasoning", 
  "Process Improvement", "Workflow Optimization", "Process Mapping", "Operational Efficiency", 
  "Quality Management", "Audit Preparation", "Risk Assessment", "Compliance Checks",

  // --- Soft Skills ---
  "Adaptability", "Flexibility", "Continuous Learning", "Self-Motivation", "Goal Setting", 
  "Stress Management", "Conflict Resolution", "Negotiation", "Persuasion", "Influencing Skills", 
  "Leadership", "Team Management", "Delegation", "Mentoring", "Coaching", 
  "Employee Engagement", "Professional Ethics", "Interpersonal Skills", "Networking", 
  "Collaboration", "Time Optimization", "Active Listening", "Problem Identification", 
  "Solution Implementation", "Project Planning", "Project Execution", "Resource Allocation",
  "Project Monitoring", "Performance Evaluation", "Decision Support", "Stakeholder Management",
  "Customer Relationship Management", "Vendor Relations", "Service Excellence", 
  "Professionalism", "Positive Attitude", "Work-Life Balance", "Self-Discipline", 
  "Presentation Design", "Report Structuring", "Email Etiquette", "Documentation Standards",

  // --- Excel & Tools ---
  "Excel Basics", "Advanced Excel", "Pivot Tables", "VLOOKUP", "HLOOKUP", 
  "Index Match", "Conditional Formatting", "Excel Macros", "Power Query", "Power Pivot", 
  "Charts & Graphs", "Data Analysis", "Data Visualization", "Tables & Formulas", 
  "Dashboard Creation", "Power BI Basics", "Power BI Reports", "Data Modeling", 
  "Excel Reporting", "Spreadsheet Automation", "Tally ERP Reports", "SAP Reports", 
  "Database Management", "SQL Queries Basics", "Report Consolidation", "Data Cleaning", 
  "Data Aggregation", "Data Transformation", "MIS Dashboard", "KPI Dashboard", 
  "Trend Analysis", "Variance Reporting",

  // --- ICMAI Specific Concepts ---
  "Bills of Exchange", "Consignment Accounting", "Joint Ventures Accounting", 
  "Sale of Goods Act", "Negotiable Instruments Act", "Acceptance & Dishonour of Instruments", 
  "Crossing & Endorsement", "Material Alteration", "Rights of Unpaid Seller", 
  "Auction Sales", "Direct Tax Computation", "Income Tax Filing", 
  "GST Returns", "TDS Returns", "Indirect Tax Reconciliation", "Costing Methods", 
  "Labour Cost Variance", "Material Cost Variance", "Overhead Variance", 
  "Job Costing", "Process Costing", "Contract Costing", "Budgetary Control", 
  "Standard Costing", "Financial Ratios", "Liquidity Ratios", "Profitability Ratios",

  // --- Professional Tools ---
  "TANDEM EAST", "TANDEM WEST", "Bank Websites", "Share Drives", "C MOD", "ISR", 
  "Open Scan 7", "Versapay", "Micro Dynamics Group", "AR SharePoint", "My Account Platform", 
  "Amerifresh Supplier Info", "Quadient Impress", "SSO Passport Access", "Validation File Management", 
  "Email Client Tools", "Document Retrieval", "Invoice Management", "Statement Management", 
  "Customer Portal Management", "ERP System Navigation", "Software Troubleshooting", 
  "Workflow Automation Tools", "Process Standardization", "Data Backup & Recovery", 
  "Report Distribution", "System Optimization",

  // --- Personal Productivity & Learning ---
  "Continuous Improvement", "Self-Study", "Professional Development", "Time Blocking", 
  "Pomodoro Technique", "Focus Management", "Learning New Software", "Skill Upgradation", 
  "Knowledge Management", "Online Course Learning", "NPTEL Courses", "ICMAI Test Practice", 
  "Mock Exam Preparation", "Revision Planning", "Study Scheduling", "Night Shift Management", 
  "Energy Management", "Sleep Optimization", "Stress Relief Techniques", "Motivation Skills",
  "Goal Tracking", "Progress Evaluation", "Learning Efficiency", "Note Making", "Voice Notes", 
  "Productivity Hacks", "Task Prioritization"
];

/* ==================== GRAPH DATA ==================== */
// Create 400 points and assign skills repeatedly
const N = 400;
const graphData = {
  nodes: [...Array(N).keys()].map(i => ({ id: i, skill: skills[i % skills.length] })),
  links: [...Array(N).keys()]
           .filter(i => i)
           .map(i => ({ source: i, target: Math.round(Math.random() * (i - 1)) }))
};

/* ==================== CREATE GRAPH ==================== */
const Graph = ForceGraph3D()(document.getElementById('3d-graph'))
  .graphData(graphData)
  .nodeLabel(node => node.skill) // show skill on hover
  .linkWidth(1)
  .linkColor(() => 'rgba(160,200,220,0.08)');

/* ==================== CAMERA & CONTROLS ==================== */
const controls = Graph.controls();
controls.enableDamping = true; // makes movement smoother
controls.dampingFactor = 0.05;
controls.zoomSpeed = 0.5;      // smaller = smoother zoom
controls.minDistance = 150;    // cannot zoom too close
controls.maxDistance = 2000;   // cannot zoom too far
controls.enableRotate = true;  
controls.enablePan = true;     
controls.screenSpacePanning = true;

Graph.cameraPosition({ x:0, y:0, z: START_CAMERA_Z });

/* ==================== AUTO ROTATION ==================== */
let autoSpin = false;       // should it rotate automatically
let userInteracting = false; // is the user dragging/zooming?

// Move camera smoothly to a new Z position
function smoothZoom(targetZ, duration, callback) {
  const cam = Graph.camera();
  const startZ = cam.position.z;
  const startTime = performance.now();

  function animate() {
    const now = performance.now();
    const t = Math.min(1, (now - startTime) / duration);
    cam.position.z = startZ + (targetZ - startZ) * t;
    controls.update();
    if (t < 1) requestAnimationFrame(animate);
    else if (callback) callback();
  }
  animate();
}

// Slowly rotate the graph
function autoRotateGraph() {
  if (!autoSpin || userInteracting) return;
  const cam = Graph.camera();
  const t = performance.now() * ROTATE_SPEED;
  cam.position.x = Math.sin(t * 0.8) * ZOOM_IN_Z;
  cam.position.y = Math.cos(t * 0.6) * (ZOOM_IN_Z/2);
  cam.lookAt(0,0,0);
}

/* ==================== USER INTERACTION HANDLING ==================== */
controls.addEventListener('start', () => {
  userInteracting = true; // stop rotation while user moves camera
});

controls.addEventListener('end', () => {
  // wait 2 seconds after user stops, then resume rotation
  setTimeout(() => { userInteracting = false; }, ROTATION_RESUME_DELAY);
});

/* ==================== INITIAL ZOOM ==================== */
setTimeout(() => {
  smoothZoom(ZOOM_IN_Z, ZOOM_DURATION, () => {
    autoSpin = true; // after zoom completes, rotation starts
  });
}, 3000); // wait 3 seconds before starting zoom

/* ==================== ANIMATION LOOP ==================== */
(function animateLoop() {
  requestAnimationFrame(animateLoop);
  autoRotateGraph();    // apply auto-rotation if allowed
  Graph.tickFrame();    // update the graph physics
})();
</script>
</body>
</html>
