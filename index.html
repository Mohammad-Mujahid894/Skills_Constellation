<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Skills Constellation</title>
    <style>
      body { margin: 0; background: black; }
      #3d-graph { width: 100vw; height: 100vh; }
    </style>
  </head>
  <body>
    <div id="3d-graph"></div>

    <!-- Libraries -->
    <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
    <script src="https://unpkg.com/3d-force-graph"></script>
    <script src="https://unpkg.com/three-spritetext"></script>

    <script>
      // === Your Skills ===
      const skills = [
        "Excel","Power BI","SAP FICO","Tally","GST Filing","Versapay","TANDEM","ISR","C-Mod",
        "Micro Dynamics","Quadient Impress","Cash Application","Accounts Receivable","O2C",
        "Collections","NSF Returns","Demand Letters","Audit Support","Customer Aging",
        "Bank Reconciliation","Wells Fargo","JP Morgan","Bank of America","PNC","US Bank",
        "QuickBooks","Zoho Books","Xero","Sage","Reporting Automation","Foxtrot RPA",
        "Workflow Optimization","Process Improvement","Compliance","Business Ethics",
        "Customer Communication","Team Leadership","E-Filing","Analytics","Finance","ERP",
        "Leadership","Problem Solving","Critical Thinking","Adaptability","Excel VBA","Data Modelling"
      ];

      // Build nodes & links
      const nodes = skills.map(s => ({ id: s }));
      const links = [];
      nodes.forEach((n,i) => {
        if (i > 0) {
          const target = nodes[Math.floor(Math.random() * i)];
          links.push({ source: n.id, target: target.id });
        }
      });
      const gData = { nodes, links };

      // Star texture (use your uploaded star image URL instead if hosted)
      const starTextureUrl = "https://i.ibb.co/pj2RjrN/star-texture.png"; 

      // Graph
      const Graph = ForceGraph3D()(document.getElementById('3d-graph'))
        .graphData(gData)
        .backgroundColor('#000010')
        .showNavInfo(false)
        .enableNodeDrag(false)
        .linkOpacity(0.3)
        .linkWidth(1.2)
        .linkDirectionalParticles(2)
        .linkDirectionalParticleSpeed(0.004)
        .nodeThreeObject(node => {
          // Star sprite
          const texture = new THREE.TextureLoader().load(starTextureUrl);
          const material = new THREE.SpriteMaterial({
            map: texture,
            transparent: true,
            opacity: 0.9,
            color: 0xffffff
          });
          const star = new THREE.Sprite(material);
          star.scale.set(20, 20, 1);

          // Skill label
          const label = new SpriteText(node.id);
          label.color = 'lightblue';
          label.textHeight = 4;
          label.position.y = 12;

          const group = new THREE.Group();
          group.add(star);
          group.add(label);
          return group;
        });

      // === Hover Highlight ===
      let highlightNodes = new Set();
      let highlightLinks = new Set();

      Graph.onNodeHover(node => {
        highlightNodes.clear();
        highlightLinks.clear();

        if (node) {
          highlightNodes.add(node);
          gData.links.forEach(l => {
            if (l.source.id === node.id) { highlightNodes.add(l.target); highlightLinks.add(l); }
            if (l.target.id === node.id) { highlightNodes.add(l.source); highlightLinks.add(l); }
          });
        }

        Graph.nodeColor(n => highlightNodes.has(n) ? 'yellow' : 'white')
             .linkColor(l => highlightLinks.has(l) ? 'yellow' : 'rgba(122,162,255,0.3)');
      });
    </script>
  </body>
</html>
