<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Star Nodes + 3D Force Graph</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    html, body { height:100%; margin:0; background:#040414; }
    #3d-graph { width:100vw; height:100vh; display:block; }
    #starCanvas { display:none; width:256px; height:256px; }
  </style>
</head>
<body>
<canvas id="starCanvas" width="256" height="256"></canvas>
<div id="3d-graph"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/3d-force-graph@1.77.0/dist/3d-force-graph.min.js"></script>
<script>
/*********************** CONFIG/TWEAKABLE SETTINGS *************************/
// Node star size
const STAR_SIZE = 8; // smaller = tiny, bigger = large
// Label size
const LABEL_FONT_SIZE = 65; // bigger = more readable
// Graph spacing (repulsion)
const REPULSION_STRENGTH = -18; // bigger negative = more spread out
// Target zoom after graph settles
const ZOOM_IN_AMOUNT = 400; // how much closer after standby
// Zoom-in duration (ms)
// Directional particle dimness
const PARTICLE_WIDTH = 1.0; // thinner = less visible
const PARTICLE_SPEED = 0.001; // slower particle
const PARTICLE_OPACITY = 0.3; // dim

/*********************** SKILLS DATA *************************/
const skills = [
  // --- O2C / Cash Application ---
  "Cash Application", "Invoice Processing", "Bank Reconciliation", "Accounts Receivable", 
  "ACH Processing", "Wire Payment Processing", "Check Processing", "NSF Handling", 
  "Remittance Matching", "Customer Communication", "Payment Reconciliation", 
  "Credit Management", "Debit/Credit Notes", "Invoice Distribution", "Collections",
  "Customer Queries Handling", "AR Aging Report", "Payment Dispute Resolution", 
  "Bank Statement Analysis", "Service Charge Management", "Write-Offs Management", 
  "Vendor Coordination", "Internal Reporting", "US Foods TANDEM System", 
  "Versapay Platform", "Micro Dynamics ERP", "C MOD Software", "ISR Tool", 
  "Open Scan Research Tool", "Quadient Impress", "AR SharePoint Management", 
  "Validation File Handling", "My Account Platform Management", "ACH Auto Deduct Coordination",

  // --- ICMAI / Accounting & Finance ---
  "Financial Accounting", "Cost Accounting", "Direct Taxation", "Indirect Taxation", 
  "GST Compliance", "TDS Compliance", "Income Tax Calculation", "Payroll Accounting", 
  "Balance Sheet Preparation", "Profit & Loss Statement", "Trial Balance", 
  "General Ledger Management", "Journal Entries", "Bank Reconciliation Statement", 
  "Financial Analysis", "Variance Analysis", "Budgeting", "Forecasting", 
  "Cost Allocation", "Material Ledger", "Stock Ledger", "Inventory Accounting", 
  "Fixed Assets Accounting", "Depreciation Accounting", "Payroll Processing", 
  "Accounting Principles", "Accounting Software Tally ERP", "SAP FICO Basics", 
  "Accounting Ratios", "KPI Reporting", "MIS Reporting", "Financial Modelling", 
  "Audit Compliance", "Internal Audit Support", "Regulatory Reporting", "SOX Compliance",

  // --- Professional Skills ---
  "Email Communication", "Professional Etiquette", "Report Writing", "Documentation Management", 
  "Data Entry Accuracy", "Attention to Detail", "Organizational Skills", "Time Management", 
  "Multitasking", "Prioritization", "Deadline Management", "Internal Coordination", 
  "Team Collaboration", "Stakeholder Communication", "Vendor Communication", 
  "Client Communication", "Meeting Coordination", "Workforce Management", 
  "Task Scheduling", "Performance Tracking", "Presentation Skills", "Decision Making",
  "Problem Solving", "Analytical Thinking", "Critical Thinking", "Logical Reasoning", 
  "Process Improvement", "Workflow Optimization", "Process Mapping", "Operational Efficiency", 
  "Quality Management", "Audit Preparation", "Risk Assessment", "Compliance Checks",

  // --- Soft Skills ---
  "Adaptability", "Flexibility", "Continuous Learning", "Self-Motivation", "Goal Setting", 
  "Stress Management", "Conflict Resolution", "Negotiation", "Persuasion", "Influencing Skills", 
  "Leadership", "Team Management", "Delegation", "Mentoring", "Coaching", 
  "Employee Engagement", "Professional Ethics", "Interpersonal Skills", "Networking", 
  "Collaboration", "Time Optimization", "Active Listening", "Problem Identification", 
  "Solution Implementation", "Project Planning", "Project Execution", "Resource Allocation",
  "Project Monitoring", "Performance Evaluation", "Decision Support", "Stakeholder Management",
  "Customer Relationship Management", "Vendor Relations", "Service Excellence", 
  "Professionalism", "Positive Attitude", "Work-Life Balance", "Self-Discipline", 
  "Presentation Design", "Report Structuring", "Email Etiquette", "Documentation Standards",

  // --- Excel & Tools ---
  "Excel Basics", "Advanced Excel", "Pivot Tables", "VLOOKUP", "HLOOKUP", 
  "Index Match", "Conditional Formatting", "Excel Macros", "Power Query", "Power Pivot", 
  "Charts & Graphs", "Data Analysis", "Data Visualization", "Tables & Formulas", 
  "Dashboard Creation", "Power BI Basics", "Power BI Reports", "Data Modeling", 
  "Excel Reporting", "Spreadsheet Automation", "Tally ERP Reports", "SAP Reports", 
  "Database Management", "SQL Queries Basics", "Report Consolidation", "Data Cleaning", 
  "Data Aggregation", "Data Transformation", "MIS Dashboard", "KPI Dashboard", 
  "Trend Analysis", "Variance Reporting",

  // --- ICMAI Specific Concepts ---
  "Bills of Exchange", "Consignment Accounting", "Joint Ventures Accounting", 
  "Sale of Goods Act", "Negotiable Instruments Act", "Acceptance & Dishonour of Instruments", 
  "Crossing & Endorsement", "Material Alteration", "Rights of Unpaid Seller", 
  "Auction Sales", "Direct Tax Computation", "Income Tax Filing", 
  "GST Returns", "TDS Returns", "Indirect Tax Reconciliation", "Costing Methods", 
  "Labour Cost Variance", "Material Cost Variance", "Overhead Variance", 
  "Job Costing", "Process Costing", "Contract Costing", "Budgetary Control", 
  "Standard Costing", "Financial Ratios", "Liquidity Ratios", "Profitability Ratios",

  // --- Professional Tools ---
  "TANDEM EAST", "TANDEM WEST", "Bank Websites", "Share Drives", "C MOD", "ISR", 
  "Open Scan 7", "Versapay", "Micro Dynamics Group", "AR SharePoint", "My Account Platform", 
  "Amerifresh Supplier Info", "Quadient Impress", "SSO Passport Access", "Validation File Management", 
  "Email Client Tools", "Document Retrieval", "Invoice Management", "Statement Management", 
  "Customer Portal Management", "ERP System Navigation", "Software Troubleshooting", 
  "Workflow Automation Tools", "Process Standardization", "Data Backup & Recovery", 
  "Report Distribution", "System Optimization",

  // --- Personal Productivity & Learning ---
  "Continuous Improvement", "Self-Study", "Professional Development", "Time Blocking", 
  "Pomodoro Technique", "Focus Management", "Learning New Software", "Skill Upgradation", 
  "Knowledge Management", "Online Course Learning", "NPTEL Courses", "ICMAI Test Practice", 
  "Mock Exam Preparation", "Revision Planning", "Study Scheduling", "Night Shift Management", 
  "Energy Management", "Sleep Optimization", "Stress Relief Techniques", "Motivation Skills",
  "Goal Tracking", "Progress Evaluation", "Learning Efficiency", "Note Making", "Voice Notes", 
  "Productivity Hacks", "Task Prioritization"
];

/*********************** GRAPH DATA *************************/
const N = 400; // node count
const gData = {
  nodes: [...Array(N).keys()].map(i => ({ id: i, skill: skills[i % skills.length] })),
  links: [...Array(N).keys()].filter(i => i).map(i => ({ source: i, target: Math.round(Math.random() * (i - 1)) }))
};

/*********************** STAR CANVAS *************************/
const canvas = document.getElementById('starCanvas');
const ctx = canvas.getContext('2d');
const cx = canvas.width / 2;
const cy = canvas.height / 2;

function drawGlowingStar() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Glowing aura
    for (let i = 8; i>0; i--){
        ctx.save();
        const glowRadius = 50 + i*10 + Math.sin(Date.now()/900)*2;
        ctx.globalAlpha = 0.03 + 0.06*(i/8);
        ctx.beginPath();
        ctx.arc(cx,cy,glowRadius,0,Math.PI*2);
        ctx.closePath();
        ctx.fillStyle = i%2===0 ? 'rgba(62,189,255,0.7)' : 'rgba(255,236,128,0.3)';
        ctx.shadowColor = i%2===0 ? '#60ecff' : '#fffadc';
        ctx.shadowBlur = 30 + i*5;
        ctx.fill();
        ctx.restore();
    }

    // Central core
    ctx.save();
    const grad = ctx.createRadialGradient(cx,cy,5,cx,cy,20);
    grad.addColorStop(0,'#fff');
    grad.addColorStop(0.3,'#fff6b5');
    grad.addColorStop(1,'#fffacd11');
    ctx.beginPath();
    ctx.arc(cx,cy,20,0,Math.PI*2);
    ctx.closePath();
    ctx.fillStyle = grad;
    ctx.shadowColor='gold';
    ctx.shadowBlur = 30;
    ctx.fill();
    ctx.restore();

    requestAnimationFrame(drawGlowingStar);
}
drawGlowingStar();

/*********************** CREATE TEXTURE *************************/
const starTexture = new THREE.CanvasTexture(canvas);
starTexture.minFilter = THREE.LinearFilter;
starTexture.magFilter = THREE.LinearFilter;
starTexture.needsUpdate = true;

/*********************** BUILD 3D GRAPH *************************/
const Graph = ForceGraph3D({ controlType: 'orbit' })(document.getElementById('3d-graph'))
  .graphData(gData)
  .nodeThreeObject(node=>{
      const group = new THREE.Group();

      // star sprite
      const starCanvas = document.createElement('canvas');
      starCanvas.width = starCanvas.height = 64;
      const ctx = starCanvas.getContext('2d');
      const gradient = ctx.createRadialGradient(32,32,0,32,32,32);
gradient.addColorStop(0,'rgba(255,255,200,1)');    // core (white)
gradient.addColorStop(0.3,'rgba(255,220,120,0.8)');
gradient.addColorStop(0.6,'rgba(255,180,60,0.5)');
gradient.addColorStop(1,'rgba(255,180,60,0)');      // fade out
      ctx.fillStyle = gradient;
      ctx.fillRect(0,0,64,64);

      const texture = new THREE.CanvasTexture(starCanvas);
      const material = new THREE.SpriteMaterial({map: texture, transparent:true});
      const sprite = new THREE.Sprite(material);
      sprite.scale.set(STAR_SIZE, STAR_SIZE, 1);
      group.add(sprite);

      // label
      const labelCanvas = document.createElement('canvas');
      const labelCtx = labelCanvas.getContext('2d');
      labelCtx.font = `${LABEL_FONT_SIZE}px Arial`;
      const text = node.skill;
      const textWidth = labelCtx.measureText(text).width;
      labelCanvas.width = textWidth+20;
      labelCanvas.height = LABEL_FONT_SIZE+10;
      labelCtx.font = `${LABEL_FONT_SIZE}px Arial`;
      labelCtx.fillStyle = '#cce6ff';
      labelCtx.fillText(text,5,LABEL_FONT_SIZE);

      const labelTexture = new THREE.CanvasTexture(labelCanvas);
      const labelMaterial = new THREE.SpriteMaterial({map:labelTexture,transparent:true});
      const label = new THREE.Sprite(labelMaterial);
      label.position.set(0, LABEL_FONT_SIZE*0.2, 0);
      label.scale.set(labelCanvas.width*0.06,labelCanvas.height*0.06,1);
      group.add(label);

      return group;
  })
  .linkWidth(1.0)
  .linkColor(()=> 'rgba(160,200,220,0.08)')
  .linkOpacity(1)
  .linkDirectionalParticles(1)
  .linkDirectionalParticleWidth(PARTICLE_WIDTH)
  .linkDirectionalParticleSpeed(()=> PARTICLE_SPEED)
  .linkDirectionalParticleColor(()=> `rgba(255,246,200,${PARTICLE_OPACITY})`)
  .onNodeHover(node=>document.body.style.cursor=node?'pointer':null)
  ;
/*********************** CAMERA, AUTO-ROTATE & STAR UPDATE (Corrected) *************************/
// Initial camera position
// Initial camera position
// Initial camera position
const initialZ = 900;
Graph.cameraPosition({ x: 0, y: 0, z: initialZ });

// Controls
const controls = Graph.controls();
controls.enableDamping = true;
controls.dampingFactor = 0.05;
controls.zoomSpeed = 0.5;
controls.minDistance = 150;
controls.maxDistance = 2000;
controls.enableRotate = true;
controls.enablePan = true;
controls.screenSpacePanning = true;

// Auto-rotation variables
let autoSpin = false;
let userInteracting = false;

// Store camera center after zoom
let camCenter = { x: 0, y: 0, z: initialZ };

// Zoom function
function smoothZoom(targetZ, duration = 3000, callback) {
  const cam = Graph.camera();
  const startZ = cam.position.z;
  const startTime = performance.now();

  function animate() {
    const now = performance.now();
    const t = Math.min(1, (now - startTime) / duration);
    cam.position.z = startZ + (targetZ - startZ) * t;
    camCenter.z = cam.position.z; // update zoom level

    controls.update();
    if (t < 1) requestAnimationFrame(animate);
    else if (callback) callback();
  }
  animate();
}

// Oscillating auto-rotation around the zoomed position
function autoRotate() {
  if (!autoSpin || userInteracting) return;

  const cam = Graph.camera();
  const t = performance.now() * 0.0002; // rotation speed

  // Oscillation offsets (small movement around zoomed center)
  const offsetX = Math.sin(t * 0.8) * 50; // 50 units left-right
  const offsetY = Math.cos(t * 0.6) * 30; // 30 units up-down

  cam.position.x = camCenter.x + offsetX;
  cam.position.y = camCenter.y + offsetY;
  cam.position.z = camCenter.z; // stay at zoomed Z

  cam.lookAt(0, 0, 0);
}

// Trigger smooth zoom after 3s, then enable autoSpin
setTimeout(() => {
  smoothZoom(500, 3000, () => { 
    autoSpin = true; // start rotation after zoom finishes
  });
}, 3000);

// Handle user interaction
controls.addEventListener('start', () => { 
  userInteracting = true; // pause auto-spin
});

controls.addEventListener('end', () => {
  setTimeout(() => { userInteracting = false; }, 2000); // resume rotation after 2s
});

// Animation loop
(function animateLoop() {
  requestAnimationFrame(animateLoop);
  autoRotate();
  Graph.tickFrame(); // update graph physics
})();




</script>
</body>
</html>
